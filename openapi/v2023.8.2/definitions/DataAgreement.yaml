title: Data agreement
type: object
description: |
  A data agreement contains the specification of a single purpose that can be consented to. 
  A data greement is universal and can be consented to by *many* individuals through a data agreement record.
required:
  - id
  - version
  - lawful_basis
  - dpia
properties:
  id:
    type: string
    description: "Data agreement identifier"

  version:
    type: string
    description: "The version of this specification to which a data agreement conforms"

  data_controller:
    $ref: "./DataController.yaml"
    description: "Data source organisation details"

  data_policy:
    $ref: "./DataPolicy.yaml"
    description: "Global policy configuration"

  purpose:
    $ref: "./Purpose.yaml"
    description: "Purpose of an agreement"

  lawful_basis:
    type: string
    description: "Lawful basis of the data agreement"
    enum:
      - consent
      - legal_obligation
      - contract
      - vital_interest
      - public_task
      - legitimate_interest

  method_of_use:
    type: string
    description: |
      Method of use indicates the data exchange mode of data agreement. 
      When the data controller wishes to expose the data for consumption it should be data-source.
      When the data controller wishes to consume the data it should be data-using-service
    num:
      - null
      - data-source
      - data-using-service

  dpia:
    description: "Data Protection Impact Assessment"
    $ref: "./DPIA.yaml"

  lifecycle:
    $ref: "./Lifecycle.yaml"

  signature:
    $ref: "./Signature.yaml"

  active:
    type: boolean
    description: "Agreement is active and new ConsentRecords can be created."

  forgettable:
    type: boolean
    description: "Consent Record may be deleted when consent is withdrawn, as its existence is not necessary for auditability."
