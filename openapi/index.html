<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="GovStack Consent BB APIs" />
    <title>GovStack Consent BB APIs</title>
    <script
      type="module"
      src="https://unpkg.com/rapidoc/dist/rapidoc-min.js"
    ></script>
    <script>
      // JavaScript to modify render-style based on screen width
      window.addEventListener("DOMContentLoaded", (event) => {
        const rapiDocElement = document.querySelector("rapi-doc");
        if (window.innerWidth <= 768) {
          // Assuming 768px as the breakpoint for tablet size
          rapiDocElement.setAttribute("render-style", "read"); // for sizes less than a tablet

          // Function to apply the style when the element is available
          const applyStyleToApiInfo = () => {
            const mainContentElement =
              rapiDocElement.shadowRoot.querySelector(".main-content");
            const apiInfoElement =
              rapiDocElement.shadowRoot.querySelector("#api-info");
            const labelOperationPathElements =
              rapiDocElement.shadowRoot.querySelectorAll(
                "[part*='section-operation-webhook-method']"
              );

            if (
              apiInfoElement &&
              labelOperationPathElements &&
              mainContentElement
            ) {
              mainContentElement.style.padding = "10px";
              apiInfoElement.style.marginLeft = "0";
              labelOperationPathElements.forEach(function (element) {
                element.style.overflowX = "scroll";
              });
              observer.disconnect(); // Stop observing once style is applied
            }
          };

          // Observe changes in the Shadow DOM
          const observer = new MutationObserver(applyStyleToApiInfo);
          if (rapiDocElement.shadowRoot) {
            observer.observe(rapiDocElement.shadowRoot, {
              childList: true,
              subtree: true,
            });
            applyStyleToApiInfo(); // Try applying the style immediately in case the element is already there
          }
        } else {
          rapiDocElement.setAttribute("render-style", "focused"); // for sizes greater than a tablet
        }
      });
    </script>
  </head>
  <body>
    <rapi-doc
      render-style="focused"
      spec-url="./index.yaml"
      theme="light"
      show-header="false"
      nav-bg-color="#0a065e"
      nav-text-color="#fff"
      primary-color="#0a065e"
      persist-auth="true"
      show-method-in-nav-bar="as-colored-block"
      show-components="true"
      allow-spec-file-download="true"
      show-curl-before-try="true"
      schema-style="table"
    >
      <img slot="nav-logo" src="./resources/logo.svg" />
    </rapi-doc>
  </body>
</html>
