<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="GovStack Consent BB APIs" />
    <title>GovStack Consent BB APIs</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Hind:wght@400;700&amp;family=Roboto+Mono&amp;display=swap"
      rel="stylesheet"
    />
    <script
      type="module"
      src="https://unpkg.com/rapidoc/dist/rapidoc-min.js"
    ></script>
    <script>
      // JavaScript to modify render-style based on screen width
      window.addEventListener("DOMContentLoaded", (event) => {
        const rapiDocElement = document.querySelector("rapi-doc");
        if (window.innerWidth <= 768) {
          // Assuming 768px as the breakpoint for tablet size
          rapiDocElement.setAttribute("render-style", "read"); // for sizes less than a tablet

          // Function to apply the style when the element is available
          const applyStyleToApiInfo = () => {
            const mainContentElement =
              rapiDocElement.shadowRoot.querySelector(".main-content");
            const apiInfoElement =
              rapiDocElement.shadowRoot.querySelector("#api-info");
            const labelOperationPathElements =
              rapiDocElement.shadowRoot.querySelectorAll(
                "[part*='section-operation-webhook-method']"
              );

            if (
              apiInfoElement &&
              labelOperationPathElements &&
              mainContentElement &&
              sidebar
            ) {
              mainContentElement.style.padding = "10px";
              apiInfoElement.style.marginLeft = "0";
              labelOperationPathElements.forEach(function (element) {
                element.style.overflowX = "scroll";
              });
              observer.disconnect(); // Stop observing once style is applied
            }
          };

          // Observe changes in the Shadow DOM
          const observer = new MutationObserver(applyStyleToApiInfo);
          if (rapiDocElement.shadowRoot) {
            observer.observe(rapiDocElement.shadowRoot, {
              childList: true,
              subtree: true,
            });
            applyStyleToApiInfo(); // Try applying the style immediately in case the element is already there
          }
        } else {
          // Function to apply the style when the element is available
          const applyStyleToApiInfo = () => {
            const sidebar = rapiDocElement.shadowRoot.querySelector(
              "[part*='section-navbar']"
            );
            const post = rapiDocElement.shadowRoot.querySelectorAll(
              ".nav-method.as-colored-block.post"
            );
            const method = rapiDocElement.shadowRoot.querySelectorAll(
              ".nav-method.as-colored-block"
            );

            if (sidebar && post) {
              sidebar.style.minWidth = "385px";
              post.forEach(function (element) {
                element.innerHTML = "POST";
              });
              method.forEach(function (element) {
                element.style.borderRadius = "4px 4px 4px 4px";
                element.style.minWidth = "35px";
                element.style.display = "flex";
                element.style.justifyContent = "center";
                element.style.alignItems = "center";
              });

              observer.disconnect(); // Stop observing once style is applied
            }
          };
          const observer = new MutationObserver(applyStyleToApiInfo);
          if (rapiDocElement.shadowRoot) {
            observer.observe(rapiDocElement.shadowRoot, {
              childList: true,
              subtree: true,
            });
            applyStyleToApiInfo(); // Try applying the style immediately in case the element is already there
          }
          rapiDocElement.setAttribute("render-style", "read"); // for sizes greater than a tablet
        }
      });
    </script>
  </head>
  <body>
    <rapi-doc
      render-style="read"
      spec-url="./bundled.yaml"
      theme="light"
      show-header="false"
      nav-bg-color="#0a065e"
      nav-text-color="#fff"
      primary-color="#0a065e"
      persist-auth="true"
      show-method-in-nav-bar="as-colored-block"
      show-components="true"
      allow-spec-file-download="true"
      show-curl-before-try="true"
      schema-style="table"
      regular-font="Hind"
      font-size="large"
      mono-font="Roboto Mono"
      schema-expand-level="1"
      default-schema-tab="schema"
    >
      <img
        slot="nav-logo"
        style="height: 130px; width: 130px; margin: 0 auto"
        src="./resources/logo.svg"
      />
    </rapi-doc>
  </body>
</html>
